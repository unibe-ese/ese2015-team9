<%@ page language="java" pageEncoding="UTF-8"
         contentType="text/html;charset=utf-8"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<<<<<<< HEAD

<div class="flex-upper">
    <c:forEach items="${member.offers}" var="offer">
        <fieldset>
            <legend><c:out value="${offer.course.name}"></c:out></legend>
                <div class="flex-lower">
                    <div class="flex-lower-item" style="display: none">
                        <span class="bold">
                        <c:out value="${offer.course.university.name}"></c:out></span>
                        <br>
                        <span class="bold">
                            Grade: <c:out value="${offer.grade}"></c:out>
                        </span>
                    </div>
                        <div class="flex-lower-item course-info">
                            <p><c:out value="${offer.course.university.name}"></c:out></p>
                            <br>
                            <p>Grade: <c:out value="${offer.grade}"></c:out></p>
                        </div>
                    <c:if test="${not empty offer.subscriptions}">

                            <c:forEach items="${offer.subscriptions}" var="subscription">
                                <c:choose>
                                    <c:when test="${!subscription.accepted}">
                                        <div class="flex-lower-item request open">
                                            <p>Request from</p>
                                            <p class="bold"><c:out value="${subscription.member.username}"/></p>
                                            <a href="accept/${subscription.id}">Accept</a>
                                        </div>
                                        
                                    </c:when>
                                    <c:otherwise>
                                        <div class="flex-lower-item request accepted">
                                            <p>Accepted Request</p>
                                            <br>
                                            <p class="bold"><c:out value="${subscription.member.username}"/></p>
                                        </div>
                                        
                                    </c:otherwise>
                                </c:choose>

                            </c:forEach>

                    </c:if>
                        <div class="flex-lower-item remove">
                            <p>Remove this course?</p>
                            <form onsubmit="return confirm('Willst du den Kurs: ${offer.course.name} wirklich entfernen?');" 
                              action="delete_${offer.course.id}" method="post">
                            <input type="submit" value="Remove">
                </form>
                        </div>

            </div>
        </fieldset>
    </c:forEach>
</div>
=======
<!--  <script type="text/javascript">
	function changeVisibility() {
		var el = document.getElementById("courses");

		if (el.style.display == "block") {
			el.style.display = "none";
		} else {
			el.style.display = "block";
		}
	} 
</script> -->

	<h2 style="font-weight:bold">Open Tutoring Offers</h2>
	<br>
	<table class="forms" id=courses>
	<thead>
	<tr>
			<th>Course</th>
			<th>University</th>
			<th>Grade</th>
			<th>Remove</th>
		</tr>
	</thead>
		
		<c:forEach items="${member.offers}" var="offer">
			<tr>
				<td><c:out value="${offer.course.name}"></c:out></td>
				<td><c:out value="${offer.course.university.name}"></c:out></td>
				<td><c:out value="${offer.grade}"></c:out></td>
				<td align="center" ><form
						onsubmit="return confirm('Willst du den Kurs: ${offer.course.name} wirklich entfernen?');"
						action="auth/offer/${offer.id}/delete" method="get">
						<input class="none" id="deleteIcon" type="image"
							src="img/delete-icon.png" name="delete-icon">
					</form></td>
			</tr>
			<c:forEach items="${offer.subscriptions}" var="subscription">
				<tr>
					<td colspan="3" style="text-align:center" >
						<c:out value="Tutoring Request from ${subscription.member.username}"/>
					</td>
					<c:if test="${!subscription.accepted}">
					<td> <a href="auth/offer/${offer.id}/accept/${subscription.id}">Accept</a></td></c:if>
				</tr>
			</c:forEach>
		</c:forEach>
	</table>

</body>
</html>
>>>>>>> 57e2d6164179acb758562ccf1ee9e58e99d16285



